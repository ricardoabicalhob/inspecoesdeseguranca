(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1234:(e,a,s)=>{Promise.resolve().then(s.bind(s,7346))},7346:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>H});var t=s(7437),n=s(9627),r=s(2265),l=s(4839),o=s(6164);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,o.m6)((0,l.W)(a))}let c=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:i("rounded-xl border bg-card text-card-foreground shadow",s),...n})});c.displayName="Card";let d=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:i("flex flex-col space-y-1.5 p-6",s),...n})});d.displayName="CardHeader";let m=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("h3",{ref:a,className:i("font-semibold leading-none tracking-tight",s),...n})});m.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("p",{ref:a,className:i("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let x=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:i("p-6 pt-0",s),...n})});x.displayName="CardContent";let f=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:i("flex items-center p-6 pt-0",s),...n})});function u(){return(0,t.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-50",children:(0,t.jsx)(c,{children:(0,t.jsx)(x,{className:"py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(n.Z,{}),(0,t.jsx)("p",{children:"Analisando..."})]})})})})}f.displayName="CardFooter";var p=s(1538),h=s(2218);let g=(0,h.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),j=r.forwardRef((e,a)=>{let{className:s,variant:n,size:r,asChild:l=!1,...o}=e,c=l?p.g7:"button";return(0,t.jsx)(c,{className:i(g({variant:n,size:r,className:s})),ref:a,...o})});j.displayName="Button";let v=r.forwardRef((e,a)=>{let{className:s,type:n,...r}=e;return(0,t.jsx)("input",{type:n,className:i("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});v.displayName="Input";var N=s(8364);let b=(0,h.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(N.f,{ref:a,className:i(b(),s),...n})});y.displayName=N.f.displayName;var w=s(8484);let S=r.forwardRef((e,a)=>{let{className:s,orientation:n="horizontal",decorative:r=!0,...l}=e;return(0,t.jsx)(w.f,{ref:a,decorative:r,orientation:n,className:i("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",s),...l})});S.displayName=w.f.displayName;var z=s(6127),C=s(2513),A=s(8002);function R(e){let{onAddRisk:a}=e,[s,n]=(0,r.useState)(""),[l,o]=(0,r.useState)(),[i,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!1),w=async()=>{try{let e=await fetch("../api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:s})}),a=await e.json();e.ok?(o(a),g(!1)):console.log("Algo deu errado!")}catch(e){console.log("Error: ",e)}};return(0,t.jsxs)(c,{className:"mx-auto max-w-md",children:[(0,t.jsx)(d,{children:(0,t.jsx)(m,{className:"text-lg",children:"An\xe1lise de Risco"})}),(0,t.jsx)(x,{children:(0,t.jsxs)("form",{className:"flex flex-col text-left gap-2",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(z.Z,{className:"text-yellow-500"}),(0,t.jsx)("label",{className:"font-bold",children:"Situa\xe7\xe3o de risco"})]}),(0,t.jsx)(v,{disabled:i,className:"grid-w-full items-center gap-1.5",type:"text",placeholder:"Descreva a situa\xe7\xe3o de risco identificada...",value:s,onChange:e=>n(e.target.value)}),(0,t.jsx)(j,{formAction:()=>{w(),s&&g(!0)},className:"hover:bg-zinc-600",children:"Analisar situa\xe7\xe3o de risco com IA"}),h&&(0,t.jsx)(u,{})]})}),(0,t.jsx)("div",{className:"space-y6",children:(0,t.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-2",children:[l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{className:"my-4"}),(0,t.jsx)(y,{className:"font-bold",children:"Foto"}),(0,t.jsx)(v,{onClick:()=>(function(){let e=document.getElementById("imageInput");e&&e.addEventListener("change",e=>{var a;let s=null===(a=e.target)||void 0===a?void 0:a.files[0];new Promise((e,a)=>{let t=new FileReader;t.readAsDataURL(s),t.onload=()=>{e(t.result),t.onerror=e=>a(e)}}).then(e=>{var a;let t=document.createElement("li");t.innerText=s.name,t.className="bg-gray-200 rounded-md p-2 w-full select-none",null===(a=document.getElementById("nameFile"))||void 0===a||a.appendChild(t),function(e){if(l){let a=[...l.images];a.push(e),o({...l,images:a})}}(e)}).catch(e=>{console.error("Erro ao converter a imagem: ",e)})})})(),disabled:N,type:"file",maxLength:1,accept:"image/*",id:"imageInput"}),(0,t.jsx)("ul",{className:"flex flex-col gap-2 p-2",id:"nameFile"}),(0,t.jsx)(S,{className:"my-4"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,t.jsx)("p",{className:"font-bold",children:"Principais consequ\xeancias ".concat(i?"(M\xe1x. 5)":"")}),i&&(0,t.jsx)(j,{formAction:()=>(function(){if(l&&l.consequencias.length<5){let e=[...l.consequencias];e.push(""),o({...l,consequencias:e})}})(),className:"w-8 h-8 rounded-full bg-transparent hover:bg-gray-200 border-none shadow-none",children:(0,t.jsx)(C.Z,{className:" text-emerald-700"})})]})]}),void 0!==l?l.consequencias.map((e,a)=>!i&&(0,t.jsx)("p",{children:"".concat(a+1,". ").concat(e)},a)):"",void 0!==l?l.consequencias.map((e,a)=>i&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(v,{type:"text",value:l.consequencias[a],onChange:e=>(function(e,a){if(l){let s=[...l.consequencias];s[e]=a,o({...l,consequencias:s})}})(a,e.target.value)},a),(0,t.jsx)(j,{formAction:()=>(function(e){if(l&&l.consequencias.length>1){let a=[...l.consequencias];a.splice(e,1),o({...l,consequencias:a})}})(a),className:"rounded-full w-8 h-8 bg-transparent border-none shadow-none hover:bg-gray-200",children:(0,t.jsx)(A.Z,{className:"text-red-700"})})]},a)):"",l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{className:"my-4"}),(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,t.jsx)("p",{className:"font-bold",children:"A\xe7\xf5es recomendadas ".concat(i?"(M\xe1x. 5)":"")}),i&&(0,t.jsx)(j,{formAction:()=>(function(){if(l&&l.acoes.length<5){let e=[...l.acoes];e.push(""),o({...l,acoes:e})}})(),className:"w-8 h-8 rounded-full bg-transparent hover:bg-gray-200 border-none shadow-none",children:(0,t.jsx)(C.Z,{className:" text-emerald-700"})})]})]}),void 0!==l?l.acoes.map((e,a)=>!i&&(0,t.jsx)("p",{children:"".concat(a+1,". ").concat(e)},a)):"",void 0!==l?l.acoes.map((e,a)=>i&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(v,{type:"text",value:l.acoes[a],onChange:e=>(function(e,a){if(l){let s=[...l.acoes];s[e]=a,o({...l,acoes:s})}})(a,e.target.value)},a),(0,t.jsx)(j,{formAction:()=>(function(e){if(l&&l.acoes.length>1){let a=[...l.acoes];a.splice(e,1),o({...l,acoes:a})}})(a),className:"rounded-full w-8 h-8 bg-transparent border-none shadow-none hover:bg-gray-200",children:(0,t.jsx)(A.Z,{className:"text-red-700"})})]},a)):""]})}),l&&(0,t.jsx)(S,{className:"my-2"})]})}),(0,t.jsx)(f,{className:"flex justify-end gap-2",children:l&&(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)(j,{disabled:i,onClick:()=>{n(""),o(void 0),b(!1)},children:"Limpar"}),i&&(0,t.jsx)(j,{onClick:function(){let e;e=!1,l?(l.consequencias.find(function(a){""===a&&(e=!0)}),l.acoes.find(function(a){""===a&&(e=!0)})):console.log("code \xe9 undefined"),e||p(!1)},children:"Salvar altera\xe7\xf5es"}),!i&&(0,t.jsx)(j,{onClick:function(){p(!0)},className:"bg-yellow-500 hover:bg-yellow-300",children:"Editar"}),(0,t.jsx)(j,{onClick:()=>{l?a(l):console.log("Algo deu errado! Por favor tente novamente."),n(""),o(void 0)},disabled:i,className:"bg-emerald-600 hover:bg-emerald-400",children:"Salvar"})]})})]})}var q=s(9772),k=s(1014),I=s(9343);let E=q.z.object({areaEmitente:q.z.string().min(2,{message:""}),areaLotacao:q.z.string().min(2,{message:""}),localInspecionado:q.z.string().min(2,{message:""}),cidade:q.z.string().min(2,{message:""}),cipa:q.z.string().min(2,{message:""}),data:q.z.coerce.date()});function F(){let{register:e,handleSubmit:a}=(0,I.cI)({resolver:(0,k.F)(E)});return(0,t.jsxs)(c,{className:"mx-auto max-w-md",children:[(0,t.jsx)(d,{children:(0,t.jsx)(m,{className:"text-lg",children:"Dados da Inspe\xe7\xe3o"})}),(0,t.jsx)(x,{children:(0,t.jsxs)("form",{onSubmit:a(function(e){console.log(e)}),className:"grid gap-2",children:[(0,t.jsx)(v,{placeholder:"\xc1rea emitente",...e("areaEmitente")}),(0,t.jsx)(v,{placeholder:"\xc1rea/Lota\xe7\xe3o",...e("areaLotacao")}),(0,t.jsx)(v,{placeholder:"Local inspecionado",...e("localInspecionado")}),(0,t.jsx)(v,{placeholder:"Cidade",...e("cidade")}),(0,t.jsx)(v,{placeholder:"Cipa",...e("cipa")}),(0,t.jsx)(v,{type:"date",...e("data")}),(0,t.jsx)(j,{type:"submit",children:"Salvar"})]})})]})}var D=s(1835),L=s(4867);let _=D.fC;r.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(D.ck,{ref:a,className:i("border-b",s),...n})}).displayName="AccordionItem",r.forwardRef((e,a)=>{let{className:s,children:n,...r}=e;return(0,t.jsx)(D.h4,{className:"flex",children:(0,t.jsxs)(D.xz,{ref:a,className:i("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",s),...r,children:[n,(0,t.jsx)(L.v4q,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})}).displayName=D.xz.displayName;let O=r.forwardRef((e,a)=>{let{className:s,children:n,...r}=e;return(0,t.jsx)(D.VY,{ref:a,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,t.jsx)("div",{className:i("pb-4 pt-0",s),children:n})})});O.displayName=D.VY.displayName;var P=s(5920),Z=s.n(P),B=s(4671);async function T(e){let a=async()=>{let e=await fetch("../lib/imagens/logo-cipa.jpg"),a=Array.from(new Uint8Array(await e.arrayBuffer()));imageData=btoa(String.fromCharCode.apply(null,a))};await a();let s={content:[{text:"Relat\xf3rio de Inspe\xe7\xe3o de Seguran\xe7a",fontSize:16,alignment:"center"},{text:" "},{text:" "},{table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Empresa: ",fontSize:11},{text:"Data: ",fontSize:11},{text:"Hora: ",fontSize:11}],[{text:"Local: ",fontSize:11},{text:"Cidade: ",fontSize:11},{text:"\xc1rea emitente: ",fontSize:11}]]}},{text:" "},{text:"INDICA\xc7\xc3O DAS N\xc3O CONFORMIDADES",alignment:"center"},{text:" "},{text:"Solicitamos sua especial aten\xe7\xe3o para o assunto citado, visto que s\xe3o irregularidades que comprometem a seguran\xe7a do(s) funcion\xe1rio(s) e/ou equipamento(s) no local de trabalho e terceiros.",fontSize:10,alignment:"justify"},{text:" "},{text:" "},e.map((e,a)=>[{text:"".concat(a+1,". ").concat(e.risco),fontSize:14,bold:!0},{text:" "},{text:"Fotos",fontSize:12,bold:!0},{text:" "},e.images.map((a,s)=>[{image:e.images[s],fit:[300,160],alignment:"center"},{text:" "}]),{text:" "},{text:" "},{text:"Consequ\xeancias",fontSize:12,bold:!0},{text:" "},{ul:e.consequencias,fontSize:11,alignment:"justify"},{text:" "},{text:"A\xe7\xf5es recomendadas",fontSize:12,bold:!0},{text:" "},{ul:e.acoes,fontSize:11,alignment:"justify"},{text:" "}])]};Z().createPdf(s).download()}Z().vfs=B;var M=s(2421);function V(e){let{listRisks:a}=e;return(0,t.jsxs)(c,{className:"mx-auto max-w-md",children:[(0,t.jsx)(d,{children:(0,t.jsx)(m,{className:"text-lg",children:"Situa\xe7\xf5es de Risco Identificadas"})}),(0,t.jsx)(_,{type:"single",collapsible:!0,className:"w-full px-6 py-4",children:void 0!==a?a.map((e,a)=>(0,t.jsxs)(D.Qd,{value:a.toString(),className:"my-6",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsx)(D.o4,{className:"font-bold text-left max-w-[90%]",children:"".concat(a+1,". ").concat(e.risco)}),(0,t.jsx)(M.Z,{})]}),(0,t.jsxs)(O,{children:[(0,t.jsx)("p",{className:"font-bold ml-4 my-4",children:"Fotos"}),(0,t.jsx)("div",{className:"flex gap-2 justify-center",children:e.images.map((e,a)=>(0,t.jsx)("img",{className:"w-[150px] h-[80px] mt-1 mb-1",src:e},a))}),(0,t.jsx)("p",{className:"font-bold ml-4 my-4",children:"Principais consequ\xeancias"}),e.consequencias.map((e,a)=>(0,t.jsx)("p",{className:"text-left ml-4",children:"".concat(a+1,". ").concat(e)},a)),(0,t.jsx)(S,{className:"my-4"}),(0,t.jsx)("p",{className:"font-bold ml-4 my-4",children:"A\xe7\xf5es recomendadas"}),e.acoes.map((e,a)=>(0,t.jsx)("p",{className:"text-left ml-4",children:"".concat(a+1,". ").concat(e)},a))]})]},a)):null}),(0,t.jsx)(f,{children:(0,t.jsx)(j,{onClick:()=>T(a),children:"Gerar PDF"})})]})}function H(){let[e,a]=(0,r.useState)([]);return(0,t.jsxs)("main",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 my-6",children:[(0,t.jsx)("section",{children:(0,t.jsx)(F,{})}),(0,t.jsx)("section",{children:(0,t.jsx)(R,{onAddRisk:function(s){let t=[...e];t.push(s),a(t)}})}),(0,t.jsx)("section",{children:(0,t.jsx)(V,{listRisks:e})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[950,346,310,106,130,215,744],()=>a(1234)),_N_E=e.O()}]);